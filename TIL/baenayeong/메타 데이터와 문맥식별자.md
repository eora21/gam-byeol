### 메모

로그 형식은 json 형식이 많이 사용된다.

## 메타 데이터

메타 데이터란 서비스를 구성하는 정보에 대해서 식별자와 그 상세 정보가 매핑된 데이터를 의미한다.

ex. 로그에는 퀘스트에 대한 상세 정보를 남기지 않고 퀘스트 아이디만 기록해서 실제로 로그를 사용할 때에는 메타 데이터를 참조해서 나머지 정보를 얻는 방식.

메타 데이터를 많이 쓰면 관리 이슈가 생길 수 있고 집계 시마다 로그 외의 다른 데이터를 참조해야 하기 때문에 생산성이 저하될 수 있다. 따라서 본래 목표를 위한 기본적인 데이터는 로그 항목에 포함하는 것이 좋다.

- 메타 데이터를 사용하기 적절한 상황

  변하지 않는 데이터가 너무 많고 로그의 목표에 굳이 필요하지 않은 경우 → 목표에 꼭 필요한 데이터라면 로그의 항목으로 구성하는 것이 좋다.

  메타 데이터로 만들 것들은 유저나 다른 환경에 의해 변경되지 않고 서비스 제공자만 변경할 수 있어야 한다.

서비스가 성장하면서 메타 데이터가 불가피하게 많아질 경우에는 메타 데이터를 효율적으로 관리하고 사용하기 위한 도구가 필요하다.

## 문맥 식별자

문맥 식별자는 **하나의 행동으로 일어난 여러 개의 로그는 같은 문맥 식별자를 가지게 하는 것**이다. 인과 관계나 선후 관계를 파악하는 데 도움을 준다. 예를 들어, 유저가 경험치를 획득한 로그를 보고 어떤 경로로 획득했는지 궁금하다면 해당 로그와 같은 문맥 식별자를 가지고 있는 다른 로그를 찾아볼 수 있다.

![image](https://user-images.githubusercontent.com/55578809/159493735-010bf364-361d-4784-bc2d-4544e38bef47.png)

→ 경험치를 더해주는 연산을 할 때, 단순히 연산만 저장하는 게 아니라 유저가 무엇을 해서 경험치를 얻었는지까지 저장해주는 것을 의미하는 것 같다!

데이터 발생 시간으로도 전후 관계를 어느 정도 유추할 수 있지만 문맥 식별자를 넣는 게 더 정확하고, 집계할 때 편하다.

## 고유 식별자

고유 식별자는 하나의 로그에 대한 고유한 식별자를 의미한다. 각각 유일한 식별자를 가지게 된다면 시스템 오류로 인해서 중복 로그가 발생했을 때 쉽게 식별할 수 있다. 또한 특정 로그를 기준으로 집계가 필요한 경우 여러 개의 필터 조건 없이 하나의 로그를 특정하기 편리해진다.